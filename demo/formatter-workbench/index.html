<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
    <title>Hypergrid Cell Formatter &amp; Editor Workbench</title>
    <link rel="stylesheet" href="index.css">
    <!--<script src="../../../curvy-tabs/build/curvy-tabs.js"></script>-->
    <script src="https://joneit.github.io/curvy-tabs/2.0.1/build/curvy-tabs.js"></script>
</head>
<body>

<script>

    var tabBars = [];
    window.onload = function() {
        document.querySelectorAll('.curvy-tabs-container').forEach(function(container) {
            var tabBar = new CurvyTabs(container);
            tabBar.paint();
            tabBars.push(tabBar);
        });

        var p = 1, MAX_PAGE = 8;

        document.getElementById('page-max').innerText = document.getElementById('page-control').max = MAX_PAGE;
        page(p, 0);
        document.getElementById('page-control').oninput = function() { page(Number(this.value)); };
        document.getElementById('page-prev').onclick = function() { page(p - 1); };
        document.getElementById('page-next').onclick = function() { page(p + 1); };

        document.addEventListener('keydown', function(e) {
            if (isTutorial()) {
                switch (e.key) {
                    case 'ArrowLeft': if (p > 1) { page(--p); } break;
                    case 'ArrowRight': if (p < MAX_PAGE) { page(++p); } break;
                }
            }
        });

        function page(n) {
            if (isTutorial()) {
                p = n;
                document.querySelector('iframe').setAttribute('src', 'tutorial/' + p + '.html');
                document.getElementById('page-number').innerText = document.getElementById('page-control').value = p;
                document.getElementById('page-prev').disabled = p === 1;
                document.getElementById('page-next').disabled = p === MAX_PAGE;
            }
        }

        function isTutorial() {
            return tabBars[1].selected.getAttribute('name') === 'Tutorial';
        }
    };
</script>

<h1 style="margin:.5em; color:lightgrey">
    Hypergrid Cell Formatter &amp; Editor Workbench
</h1>

<div id="hypergrid" style="height:145px"></div>

<div class="curvy-tabs-container" style="position:absolute;height:calc(100% - 208px); width:calc(50% - 12px); top:200px;">
    <div style="background-color:#dff" name="Data">
        <input type="button" class="api" value="grid.setData(…)" onclick="callApi('setData', 'data', true)">
        <span class="feedback">Data has been set</span>
        <textarea id="data"></textarea>
    </div>

    <div style="background-color:#fdf" name="State">
        <input type="button" class="api" value="grid.setState(…)" onclick="callApi('setState', 'state', true)">
        <span class="feedback">State has been added</span>
        <textarea id="state"></textarea>
    </div>

    <div style="background-color:#ffd" name="Localizers">
        <input type="button" value="Locals" class="locals">
        Load: <select id="localizer-dropdown"></select>
        <input type="button" class="api" value="grid.localization.add(…)">
        <span class="feedback">Saved</span>
        <textarea id="localizer-script"></textarea>
    </div>

    <div style="background-color:#ddf" name="Cell Editors">
        <input type="button" value="Locals" class="locals">
        Load: <select id="editor-dropdown"></select>
        <input type="button" class="api" value="grid.cellEditors.add(…)">
        <span class="feedback">Saved</span>
        <textarea id="editor-script"></textarea>
    </div>
</div>

<div class="curvy-tabs-container" style="position:absolute; height:calc(100% - 58px); width:calc(50% - 12px); top:50px; right:8px">
    <div style="background-color:#f4f4f4" name="Tutorial">
        <iframe src="tutorial/1.html" style="position:absolute; top:0; left:0; width:100%; height:100%; border:0"></iframe>
    </div>

    <div style="background-color:#ddd" name="Code Snippets">
    </div>
</div>

<div style="position:absolute; top:52px; right:24px; font: 10pt sans-serif;">
    <input id="page-prev" type="button" value="&lt; Prev">
    <input id="page-control" type="range" style="width:40px" min="1" max="3" value="1">
    <b id="page-number">1</b> of <b id="page-max">n</b>
    <input id="page-next" type="button" value="Next &gt;">
</div>

<script src="../build/fin-hypergrid.js"></script>

<script>var exports = {}, module = {exports};</script>
<script src="scripts.js"></script>
<script>var scripts = module.exports; delete window.exports; delete window.module;</script>

<script src="index.js"></script>

</body>
</html>
